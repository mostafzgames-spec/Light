<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¨Ø­</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #1c1c1e;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            user-select: none;
        }
        .header {
            padding: 20px;
            background: linear-gradient(45deg, #f39c12, #d35400);
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4);
            border-bottom-right-radius: 20px;
            border-bottom-left-radius: 20px;
        }
        .points-box {
            font-size: 32px;
            font-weight: bold;
        }
        .usd-val {
            font-size: 14px;
            opacity: 0.8;
        }
        
        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .tab-content { display: none; padding: 20px; padding-bottom: 80px; }
        .active-tab { display: block; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        button {
            background: #2980b9;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 18px;
            margin: 10px;
            width: 80%;
            cursor: pointer;
            transition: transform 0.1s;
        }
        button:active { transform: scale(0.95); }
        .btn-ad { background: #27ae60; }
        
        /* Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ */
        .wheel-container {
            margin: 20px auto;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 5px solid #f1c40f;
            position: relative;
            background: conic-gradient(#e74c3c 0deg 60deg, #3498db 60deg 120deg, #f1c40f 120deg 180deg, #9b59b6 180deg 240deg, #2ecc71 240deg 300deg, #e67e22 300deg 360deg);
            transition: transform 3s ease-out;
        }
        .arrow {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0; 
            height: 0; 
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 20px solid white;
            z-index: 10;
        }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙÙ„ÙŠØ© */
        .nav-bar {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: #2c3e50;
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            border-top: 1px solid #444;
        }
        .nav-item { font-size: 24px; color: #7f8c8d; }
        .nav-active { color: #f39c12; }
    </style>
</head>
<body>

    <div class="header">
        <div>Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
        <div class="points-box" id="displayPoints">0</div>
        <div class="usd-val">â‰ˆ $<span id="displayUsd">0.00</span> USDT</div>
    </div>

    <div id="tab-mining" class="tab-content active-tab">
        <h2>â› Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ</h2>
        <p>Ø´Ø§Ù‡Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Ù‹ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹Ø©</p>
        <div id="mining-status" style="margin: 20px; color: #7f8c8d;">Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ù…ØªÙˆÙ‚Ù ğŸ”´</div>
        <button class="btn-ad" onclick="startMining()">Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¥Ø¹Ù„Ø§Ù† ÙˆØ¨Ø¯Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</button>
    </div>

    <div id="tab-wheel" class="tab-content">
        <h2>ğŸ¡ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸</h2>
        <div class="arrow"></div>
        <div class="wheel-container" id="wheel"></div>
        <br>
        <button onclick="spinWheel()">Ø¯ÙˆÙ‘Ø± ÙˆØ§Ø±Ø¨Ø­ (10 Ù†Ù‚Ø§Ø·)</button>
    </div>

    <div id="tab-wallet" class="tab-content">
        <h2>ğŸ’³ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h2>
        <input type="text" id="wallet-input" placeholder="Ø¹Ù†ÙˆØ§Ù† FaucetPay (USDT)" style="width: 80%; padding: 10px; border-radius: 8px; border: none; margin-bottom: 10px;">
        <button onclick="saveWallet()">Ø­ÙØ¸ Ø§Ù„Ù…Ø­ÙØ¸Ø©</button>
        <hr style="border-color: #444;">
        <button style="background: #c0392b;" onclick="withdraw()">Ø·Ù„Ø¨ Ø³Ø­Ø¨</button>
        <p id="withdraw-msg"></p>
    </div>

    <div class="nav-bar">
        <div class="nav-item nav-active" onclick="switchTab('mining', this)">â›</div>
        <div class="nav-item" onclick="switchTab('wheel', this)">ğŸ¡</div>
        <div class="nav-item" onclick="switchTab('wallet', this)">ğŸ’³</div>
    </div>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆØª ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚
        let points = 0;
        let isMining = false;
        const tg = window.Telegram.WebApp;
        tg.expand(); // ØªÙˆØ³ÙŠØ¹ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©

        // --- Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ---
        // Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø´Ø±ÙƒØªÙƒ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ù‡Ù†Ø§ (Adsterra/Monetag Direct Link)
        const AD_LINK = "https://www.google.com"; 

        function updateDisplay() {
            document.getElementById('displayPoints').innerText = points;
            document.getElementById('displayUsd').innerText = (points * 0.0001).toFixed(4);
        }

        // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ---
        function startMining() {
            if (isMining) return;
            
            // ÙØªØ­ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
            tg.openLink(AD_LINK);
            
            document.getElementById('mining-status').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†...";
            
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø¹Ù„Ø§Ù† ÙˆØ¨Ø¯Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ†
            setTimeout(() => {
                isMining = true;
                document.getElementById('mining-status').innerText = "âœ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ÙŠØ¹Ù…Ù„! (ÙŠØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø·...)";
                document.getElementById('mining-status').style.color = "#2ecc71";
                
                // Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø· ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
                let miningInterval = setInterval(() => {
                    points += 1;
                    updateDisplay();
                }, 1000);
                
                // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø¨Ø¹Ø¯ Ø¯Ù‚ÙŠÙ‚Ø© (Ù…Ø«Ø§Ù„)
                setTimeout(() => {
                    clearInterval(miningInterval);
                    isMining = false;
                    document.getElementById('mining-status').innerText = "ØªÙˆÙ‚Ù Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ğŸ”´. Ø´Ø§Ù‡Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Ù‹ Ø¢Ø®Ø±.";
                    document.getElementById('mining-status').style.color = "#e74c3c";
                    alert("Ø§Ù†ØªÙ‡Øª Ø¬Ù„Ø³Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†! Ø¬Ù…Ø¹Øª Ù†Ù‚Ø§Ø·Ø§Ù‹ Ø¥Ø¶Ø§ÙÙŠØ©.");
                }, 10000); // 10 Ø«ÙˆØ§Ù†ÙŠ Ù„Ù„ØªØ¬Ø±Ø¨Ø©

            }, 2000);
        }

        // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¹Ø¬Ù„Ø© ---
        function spinWheel() {
            if (points < 10) {
                alert("ØªØ­ØªØ§Ø¬ 10 Ù†Ù‚Ø§Ø· Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©! Ø§Ø°Ù‡Ø¨ Ù„Ù„ØªØ¹Ø¯ÙŠÙ† Ø£ÙˆÙ„Ø§Ù‹.");
                return;
            }
            
            // Ø®ØµÙ… ØªÙƒÙ„ÙØ© Ø§Ù„Ù„ÙØ©
            points -= 10;
            updateDisplay();

            const wheel = document.getElementById('wheel');
            const deg = Math.floor(5000 + Math.random() * 5000); // Ø¯ÙˆØ±Ø§Ù† Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù‚ÙˆÙŠ
            wheel.style.transform = `rotate(${deg}deg)`;
            
            // ÙØªØ­ Ø¥Ø¹Ù„Ø§Ù† Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø§Ù†
            tg.openLink(AD_LINK);

            setTimeout(() => {
                const reward = Math.floor(Math.random() * 50); // Ø±Ø¨Ø­ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
                points += reward;
                updateDisplay();
                alert(`ØªÙˆÙ‚ÙØª Ø§Ù„Ø¹Ø¬Ù„Ø©! ğŸ‰ Ø±Ø¨Ø­Øª ${reward} Ù†Ù‚Ø·Ø©.`);
                wheel.style.transform = `rotate(0deg)`; // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·
            }, 3000);
        }

        // --- Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª ---
        function switchTab(tabName, element) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active-tab'));
            document.getElementById('tab-' + tabName).classList.add('active-tab');
            
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('nav-active'));
            element.classList.add('nav-active');
        }

        // --- Ø§Ù„Ù…Ø­ÙØ¸Ø© ---
        function saveWallet() {
            const wallet = document.getElementById('wallet-input').value;
            if(wallet.length > 5) {
                alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø­ÙØ¸Ø©: " + wallet);
                // Ù‡Ù†Ø§ Ù†Ø±Ø³Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¨ÙˆØª (ÙŠØ­ØªØ§Ø¬ Ø¨Ø±Ù…Ø¬Ø© Ø®Ù„ÙÙŠØ©)
                tg.sendData(JSON.stringify({action: "save_wallet", wallet: wallet}));
            }
        }

        function withdraw() {
            if (points < 1000) {
                alert("Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨ 1000 Ù†Ù‚Ø·Ø©");
                return;
            }
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¨ÙˆØª
            tg.sendData(JSON.stringify({action: "withdraw", amount: points}));
            points = 0;
            updateDisplay();
        }
    </script>
</body>
</html>
